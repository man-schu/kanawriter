var wanakana,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};wanakana=wanakana||{},wanakana.version="1.3.6 modified 1","function"==typeof define&&define.amd&&define("wanakana",[],function(){return wanakana}),wanakana.LOWERCASE_START=97,wanakana.LOWERCASE_END=122,wanakana.UPPERCASE_START=65,wanakana.UPPERCASE_END=90,wanakana.HIRAGANA_START=12353,wanakana.HIRAGANA_END=12438,wanakana.KATAKANA_START=12449,wanakana.KATAKANA_END=12538,wanakana.LOWERCASE_FULLWIDTH_START=65345,wanakana.LOWERCASE_FULLWIDTH_END=65370,wanakana.UPPERCASE_FULLWIDTH_START=65313,wanakana.UPPERCASE_FULLWIDTH_END=65338,wanakana.defaultOptions={useObseleteKana:!1,IMEMode:!1},wanakana.bind=function(a){return a.addEventListener("input",wanakana._onInput)},wanakana.unbind=function(a){return a.removeEventListener("input",wanakana._onInput)},wanakana._onInput=function(a){var b,c,d,e,f,g;if(b=a.target,f=b.selectionStart,g=b.value.length,d=wanakana._convertFullwidthCharsToASCII(b.value),c=wanakana.toKana(d,{IMEMode:!0}),d!==c){if(b.value=c,"number"==typeof b.selectionStart)return b.selectionStart=b.selectionEnd=b.value.length;if("undefined"!=typeof b.createTextRange)return b.focus(),e=b.createTextRange(),e.collapse(!1),e.select()}},wanakana._extend=function(a,b){var c;if(null==a)return b;for(c in b)null==a[c]&&null!=b[c]&&(a[c]=b[c]);return a},wanakana._allTrue=function(a,b){var c,d,e;for(d=0,e=a.length;e>d;d++)if(c=a[d],b(c)===!1)return!1;return!0},wanakana._isCharInRange=function(a,b,c){var d;return d=a.charCodeAt(0),d>=b&&c>=d},wanakana._isCharVowel=function(a,b){var c;return null==b&&(b=!0),c=b?/[aeiouy]/:/[aeiou]/,-1!==a.toLowerCase().charAt(0).search(c)},wanakana._isCharConsonant=function(a,b){var c;return null==b&&(b=!0),c=b?/[bcdfghjklmnpqrstvwxyz]/:/[bcdfghjklmnpqrstvwxz]/,-1!==a.toLowerCase().charAt(0).search(c)},wanakana._isCharKatakana=function(a){return wanakana._isCharInRange(a,wanakana.KATAKANA_START,wanakana.KATAKANA_END)},wanakana._isCharHiragana=function(a){return wanakana._isCharInRange(a,wanakana.HIRAGANA_START,wanakana.HIRAGANA_END)},wanakana._isCharKana=function(a){return wanakana._isCharHiragana(a)||wanakana._isCharKatakana(a)},wanakana._isCharNotKana=function(a){return!wanakana._isCharHiragana(a)&&!wanakana._isCharKatakana(a)},wanakana._convertFullwidthCharsToASCII=function(a){var b,c,d,e,f,g;for(c=a.split(""),e=f=0,g=c.length;g>f;e=++f)b=c[e],d=b.charCodeAt(0),wanakana._isCharInRange(b,wanakana.LOWERCASE_FULLWIDTH_START,wanakana.LOWERCASE_FULLWIDTH_END)&&(c[e]=String.fromCharCode(d-wanakana.LOWERCASE_FULLWIDTH_START+wanakana.LOWERCASE_START)),wanakana._isCharInRange(b,wanakana.UPPERCASE_FULLWIDTH_START,wanakana.UPPERCASE_FULLWIDTH_END)&&c[e](String.fromCharCode(d-wanakana.UPPERCASE_FULLWIDTH_START+wanakana.UPPERCASE_START));return c.join("")},wanakana._katakanaToHiragana=function(a){var b,c,d,e,f,g,h;for(c=[],h=a.split(""),f=0,g=h.length;g>f;f++)e=h[f],wanakana._isCharKatakana(e)?(b=e.charCodeAt(0),b+=wanakana.HIRAGANA_START-wanakana.KATAKANA_START,d=String.fromCharCode(b),c.push(d)):c.push(e);return c.join("")},wanakana._hiraganaToKatakana=function(a){var b,c,d,e,f,g,h;for(d=[],h=a.split(""),f=0,g=h.length;g>f;f++)c=h[f],wanakana._isCharHiragana(c)?(b=c.charCodeAt(0),b+=wanakana.KATAKANA_START-wanakana.HIRAGANA_START,e=String.fromCharCode(b),d.push(e)):d.push(c);return d.join("")},wanakana._hiraganaToRomaji=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(b=wanakana._extend(b,wanakana.defaultOptions),g=a.length,k=[],e=0,d=0,h=2,f=function(){return a.substr(e,d)},j=function(){return d=Math.min(h,g-e)};g>e;){for(j();d>0;){if(c=f(),wanakana.isKatakana(c)&&(c=wanakana._katakanaToHiragana(c)),"っ"===c.charAt(0)&&1===d&&g-1>e){i=!0,l="";break}if(l=wanakana.J_to_R[c],null!=l&&i&&(l=l.charAt(0).concat(l),i=!1),null!=l)break;d--}null==l&&(l=c),k.push(l),e+=d||1}return k.join("")},wanakana._romajiToHiragana=function(a,b){return wanakana._romajiToKana(a,b,!0)},wanakana._romajiToKana=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;for(null==c&&(c=!1),b=wanakana._extend(b,wanakana.defaultOptions),l=a.length,j=[],g=0,m=3,h=function(){return a.substr(g,f)},i=function(a){return wanakana._isCharInRange(a,wanakana.UPPERCASE_START,wanakana.UPPERCASE_END)};l>g;){for(f=Math.min(m,l-g);f>0;){if(d=h(),e=d.toLowerCase(),__indexOf.call(wanakana.FOUR_CHARACTER_EDGE_CASES,e)>=0&&l-g>=4)f++,d=h(),e=d.toLowerCase();else{if("n"===e.charAt(0)){if(b.IMEMode&&"'"===e.charAt(1)&&2===f){k="ん";break}wanakana._isCharConsonant(e.charAt(1),!1)&&wanakana._isCharVowel(e.charAt(2))&&(f=1,d=h(),e=d.toLowerCase())}"n"!==e.charAt(0)&&wanakana._isCharConsonant(e.charAt(0))&&d.charAt(0)===d.charAt(1)&&(f=1,e=d=wanakana._isCharInRange(d.charAt(0),wanakana.UPPERCASE_START,wanakana.UPPERCASE_END)?"ッ":"っ")}if(k=wanakana.R_to_J[e],null!=k)break;4===f?f-=2:f--}null==k&&(d=wanakana._convertPunctuation(d),k=d),(null!=b?b.useObseleteKana:void 0)&&("wi"===e&&(k="ゐ"),"we"===e&&(k="ゑ")),b.IMEMode&&"n"===e.charAt(0)&&("y"===a.charAt(g+1).toLowerCase()&&wanakana._isCharVowel(a.charAt(g+2))===!1||g===l-1||wanakana.isKana(a.charAt(g+1)))&&(k=d.charAt(0)),c||i(d.charAt(0))&&(k=wanakana._hiraganaToKatakana(k)),j.push(k),g+=f||1}return j.join("")},wanakana._convertPunctuation=function(a){return"　"===a?" ":"-"===a?"ー":a},wanakana.isHiragana=function(a){var b;return b=a.split(""),wanakana._allTrue(b,wanakana._isCharHiragana)},wanakana.isKatakana=function(a){var b;return b=a.split(""),wanakana._allTrue(b,wanakana._isCharKatakana)},wanakana.isKana=function(a){var b;return b=a.split(""),wanakana._allTrue(b,function(a){return wanakana.isHiragana(a)||wanakana.isKatakana(a)})},wanakana.isRomaji=function(a){var b;return b=a.split(""),wanakana._allTrue(b,function(a){return!wanakana.isHiragana(a)&&!wanakana.isKatakana(a)})},wanakana.toHiragana=function(a,b){return wanakana.isRomaji(a)?a=wanakana._romajiToHiragana(a,b):wanakana.isKatakana(a)?a=wanakana._katakanaToHiragana(a,b):a},wanakana.toKatakana=function(a,b){return wanakana.isHiragana(a)?a=wanakana._hiraganaToKatakana(a,b):wanakana.isRomaji(a)?(a=wanakana._romajiToHiragana(a,b),a=wanakana._hiraganaToKatakana(a,b)):a},wanakana.toKana=function(a,b){return a=wanakana._romajiToKana(a,b)},wanakana.toRomaji=function(a){return a=wanakana._hiraganaToRomaji(a)},wanakana.R_to_J={".":"。",a:"ア",i:"イ",u:"ウ",e:"エ",o:"オ",ka:"カ",ki:"キ",ku:"ク",ke:"ケ",ko:"コ",kya:"キャ",kyu:"キュ",kyo:"キョ",sa:"サ",shi:"シ",su:"ス",se:"セ",so:"ソ",sha:"シャ",shu:"シュ",sho:"ショ",ta:"タ",chi:"チ",tsu:"ツ",te:"テ",to:"ト",cha:"チャ",chu:"チュ",cho:"チョ",na:"ナ",ni:"ニ",nu:"ヌ",ne:"ネ",no:"ノ",nya:"ニャ",nyu:"ニュ",nyo:"ニョ",ha:"ハ",hi:"ヒ",fu:"フ",he:"ヘ",ho:"ホ",hya:"ヒャ",hyu:"ヒュ",hyo:"ヒョ",ma:"マ",mi:"ミ",mu:"ム",me:"メ",mo:"モ",mya:"ミャ",myu:"ミュ",myo:"ミョ",ya:"ヤ",yu:"ユ",yo:"ヨ",ra:"ラ",ri:"リ",ru:"ル",re:"レ",ro:"ロ",rya:"リャ",ryu:"リュ",ryo:"リョ",ga:"ガ",gi:"ギ",gu:"グ",ge:"ゲ",go:"ゴ",gya:"ギャ",guy:"ギュ",gyo:"ギョ",za:"ザ",ji:"ジ",zu:"ズ",ze:"ゼ",zo:"ゾ",ja:"ジャ",ju:"ジュ",jo:"ジョ",da:"ダ",de:"デ",do:"ド",ba:"バ",bi:"ビ",bu:"ブ",be:"ベ",bo:"ボ",bya:"ビャ",byu:"ビュ",byo:"ビョ",pa:"パ",pi:"ピ",pu:"プ",pe:"ペ",po:"ポ",pya:"ピャ",pyu:"ピュ",pyo:"ピョ",fa:"ファ",fi:"フィ",fe:"フェ",fo:"フォ",tsa:"ツァ",ti:"ティ",tu:"トゥ",wa:"ワ",we:"ウェ",wo:"ウォ",n:"ン"},wanakana.FOUR_CHARACTER_EDGE_CASES=["lts","chy","shy"],wanakana.J_to_R={ア:"a",イ:"i",ウ:"u",エ:"e",オ:"o",カ:"ka",キ:"ki",ク:"ku",ケ:"ke",コ:"ko",キャ:"kya",キュ:"kyu",キョ:"kyo",サ:"sa",シ:"shi",ス:"su",セ:"se",ソ:"so",シャ:"sha",シュ:"shu",ショ:"sho",タ:"ta",チ:"chi",ツ:"tsu",テ:"te",ト:"to",チャ:"cha",チュ:"chu",チョ:"cho",ナ:"na",ニ:"ni",ヌ:"nu",ネ:"ne",ノ:"no",ニャ:"nya",ニュ:"nyu",ニョ:"nyo",ハ:"ha",ヒ:"hi",フ:"fu",ヘ:"he",ホ:"ho",ヒャ:"hya",ヒュ:"hyu",ヒョ:"hyo",マ:"ma",ミ:"mi",ム:"mu",メ:"me",モ:"mo",ミャ:"mya",ミュ:"myu",ミョ:"myo",ヤ:"ya",ユ:"yu",ヨ:"yo",ラ:"ra",リ:"ri",ル:"ru",レ:"re",ロ:"ro",リャ:"rya",リュ:"ryu",リョ:"ryo",ガ:"ga",ギ:"gi",グ:"gu",ゲ:"ge",ゴ:"go",ギャ:"gya",ギュ:"guy",ギョ:"gyo",ザ:"za",ジ:"ji",ズ:"zu",ゼ:"ze",ゾ:"zo",ジャ:"ja",ジュ:"ju",ジョ:"jo",ダ:"da",デ:"de",ド:"do",バ:"ba",ビ:"bi",ブ:"bu",ベ:"be",ボ:"bo",ビャ:"bya",ビュ:"byu",ビョ:"byo",パ:"pa",ピ:"pi",プ:"pu",ペ:"pe",ポ:"po",ピャ:"pya",ピュ:"pyu",ピョ:"pyo",ファ:"fa",フィ:"fi",フェ:"fe",フォ:"fo",ツァ:"tsa",ティ:"ti",トゥ:"tu",ワ:"wa",ウェ:"we",ウォ:"wo",ン:"n"};